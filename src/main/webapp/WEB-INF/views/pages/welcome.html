<!DOCTYPE html >
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layouts/admin">
<head>
<title  layout:fragment="title">Welcome</title>

</head>
<body class="hold-transition skin-blue sidebar-mini">

<div layout:fragment="page_content">	
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  
<script type="text/javascript" src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
	
    <div class="col-sm-12">
    	<button type="button" class="btn btn-primary pull-right" data-toggle="modal" data-target="#myModal">New</button>

		<!-- Modal -->
		<div id="myModal" class="modal fade" role="dialog">
		  <div class="modal-dialog">
		
		    <!-- Modal content-->
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal">&times;</button>
		        <h4 class="modal-title">Modal Header</h4>
		      </div>
		    
					<div class="col-md-12">
			     
			          <div class="box box-primary">
			            <div class="box-header with-border">
			              <h3 class="box-title">User Form</h3>
			            </div>
			          
			            <form role="form" name ="userForm" method="post">
			              <div class="box-body">
			                <div class="form-group">
			                  <label for="exampleInputEmail1">ID</label>
			                  <input type="text" class="form-control" id="id" name="id" placeholder="Enter email">
			                </div>
			                <div class="form-group">
			                  <label for="exampleInputPassword1">Name</label>
			                  <input type="text" class="form-control" id="name" name="name" placeholder="Password">
			                </div>
			              </div>
			              
			              <div class="box-footer">
			                <button type="submit" class="btn btn-primary">Submit</button>
			              </div>
			            </form>
			          </div>
			       
			
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		    </div>
		
		  </div>
		</div>
		
		
		<!-- Modal -->
		<div id="myModal" class="modal fade" role="dialog">
		  <div class="modal-dialog">
		
		    <!-- Modal content-->
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal">&times;</button>
		        <h4 class="modal-title">Modal Header</h4>
		      </div>
		      <div class="modal-body">
		        	<div class="col-md-12">
			     
			          <div class="box box-primary">
			            <div class="box-header with-border">
			              <h3 class="box-title">User Form</h3>
			            </div>
			          
			            <form role="form" name ="userForm" method="post">
			              <div class="box-body">
			                <div class="form-group">
			                  <label for="exampleInputEmail1">ID</label>
			                  <input type="text" class="form-control" id="id" name="id" placeholder="Enter email">
			                </div>
			                <div class="form-group">
			                  <label for="exampleInputPassword1">Name</label>
			                  <input type="text" class="form-control" id="name" name="name" placeholder="Password">
			                </div>
			              </div>
			              
			              <div class="box-footer">
			                <button type="submit" class="btn btn-primary">Submit</button>
			              </div>
			            </form>
			          </div>
			       
				</div>
   			        
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		    </div>
		
		  </div>
		</div>
    
	<div class="col-sm-12">	
		<div class="box">
            <div class="box-header with-border">
              <h3 class="box-title">User Table</h3>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
              <table class="table table-bordered" id="dataTable" >
              <thead>
                <tr>
                  <th style="width: 10px"><input type="checkbox"/></th>
                  <th >ID</th>        
                  <th >Name</th>
                </tr>    
                </thead>
              </table>
            </div>
            
          
          </div>
	</div>
	
	<script type="text/javascript">
	$(document).ready(function() {
	    
	 var row =[];
	 $('#dataTable').DataTable( {
			 
			  ajax:{
	            	url : "/spring-mvc-mcnc/api/user/userlist",
	                type : "get",
	                dataType: 'json',
	                contentType: "application/json",
	                dataSrc:'',
			        dataType: "json",
	                error: function(data){
	                    alert();
	                },
	               
	          
	           },
		        columns: [
		        	
		        	{
		        		title:"Test",
	                   "data": null,
	                   "searchable": false,
	                   "sortable": false,
	                   "orderable": false,
	                   "class": "dt-body-center",
	                   "render": function (data, type, row) {
	                       return "<input name='m-chk-row' class='activate' value='" + row.id+ "' type='checkbox'/>";
	                   },
	               },
	               { 
	            	   title:"ID",
	            	   "data": "id",
	            	   "render": function (data, type, row) {
	                       data = '<a class="edit-user" attr=' + row.id + ' ><u>' + data + '</u></a>';
 	                	   return data;;
	                   },
	            	},
	               { 
	            		title:"Name",
	            		"data": "name"
	            		
	               },
	              
		         ]
	           
				});
	   	
	});
	$('#dataTable').on('click','a.edit-user', function (e) {
		var id = $(e.target).text();
		  
		   alert(id);
	 }); 
	
	 $('button[type=submit]').click(function(e) {
		   e.preventDefault();
		   		var user = {
		           id: $("#id").val(),
		           name:$("#name").val(),
		        
		       }
			   var data = JSON.stringify(user);
			   $.ajax({
			          data: data,
			          type: "post",
			          url: "/spring-mvc-mcnc/api/user/save",
			          async: false,
			          contentType: "application/json",
			          dataType: "json",
			          success: function(data){
			        	 			        		
			        	location.reload(); // then reload the page.(3)
			        	     
			        }
			 });
		   
	 }); 
	
	
	</script>
	
	<!-- <script type="text/javascript" src="script/useradd.js"></script> -->
 
	
</div>
</body>
</html>